{"ast":null,"code":"var _jsxFileName = \"D:\\\\projet\\\\gestion-de-PFE\\\\gestion-de-PFE\\\\client\\\\src\\\\components\\\\enseignant\\\\stages\\\\ListeDesStages.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport Table from \"react-bootstrap/Table\";\nimport { Link } from 'react-router-dom';\nimport Search from \"../../util/search/search\";\nimport axios from 'axios';\nimport Spinner from 'react-bootstrap/Spinner';\nimport '../../chefdept/chefdept.css';\nimport ErrorModal from '../../modals/ErrorModal';\nimport { connect } from 'react-redux';\nimport * as actionTypes from '../../store/reducers/actions';\nimport Liste from \"./stageListe/Liste\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ListeStages(props) {\n  _s();\n\n  const [stages, setStages] = useState([]);\n  const [loaded, setLoaded] = useState(false);\n  const [show, setShow] = useState(false);\n  const [error, setError] = useState(\"\");\n  useEffect(() => {\n    axios.get(`http://localhost:5000/api/stages/${props.userId}`).then(function (response) {\n      setStages(response.data.stages);\n      setLoaded(true);\n    }).catch(function (error) {});\n  }, [show]);\n\n  async function validHandler(e) {\n    e.preventDefault();\n\n    try {\n      const response = await fetch('http://localhost:5000/api/stages/valider', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          stageId: e.target.value\n        })\n      });\n      const responseData = await response.json();\n      setError(responseData.message);\n      setShow(true);\n    } catch (error) {\n      setError(error);\n      setShow(true);\n    }\n  }\n\n  async function deleteHandler(e) {\n    e.preventDefault();\n\n    try {\n      const response = await fetch('http://localhost:5000/api/stages/delete', {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          stageId: e.target.value\n        })\n      });\n      const responseData = await response.json();\n      setError(responseData.message);\n      setShow(true);\n    } catch (error) {\n      setError(error);\n      setShow(true);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ErrorModal, {\n      show: show,\n      setShow: setShow,\n      error: error,\n      titre: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container chefdept\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row header\",\n        children: \"Mes stages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-end mb-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-4\",\n          children: /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table\",\n        children: loaded ? /*#__PURE__*/_jsxDEV(Liste, {\n          data: stages,\n          pageLimit: 3,\n          dataLimit: 10,\n          deleteHandler: deleteHandler,\n          validHandler: validHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"grow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ListeStages, \"mtDgkO7Mp5gi5+jiJPRmBSPe+zs=\");\n\n_c = ListeStages;\n\nconst mapStateToProps = state => {\n  return {\n    userId: state.userId\n  };\n};\n\nexport default connect(mapStateToProps, null)(ListeStages);\n\nvar _c;\n\n$RefreshReg$(_c, \"ListeStages\");","map":{"version":3,"sources":["D:/projet/gestion-de-PFE/gestion-de-PFE/client/src/components/enseignant/stages/ListeDesStages.js"],"names":["React","useEffect","useState","Button","Table","Link","Search","axios","Spinner","ErrorModal","connect","actionTypes","Liste","ListeStages","props","stages","setStages","loaded","setLoaded","show","setShow","error","setError","get","userId","then","response","data","catch","validHandler","e","preventDefault","fetch","method","headers","body","JSON","stringify","stageId","target","value","responseData","json","message","deleteHandler","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport {Link} from 'react-router-dom'\r\nimport Search from \"../../util/search/search\"\r\nimport axios from 'axios'\r\nimport Spinner from 'react-bootstrap/Spinner'\r\nimport '../../chefdept/chefdept.css'\r\nimport ErrorModal from '../../modals/ErrorModal';\r\nimport {connect} from 'react-redux';\r\nimport * as actionTypes from '../../store/reducers/actions' ;\r\nimport Liste from \"./stageListe/Liste\";\r\n\r\n\r\n\r\n\r\n\r\nfunction ListeStages(props) {\r\n   \r\n  const [stages,setStages]=useState([]);\r\n  const [loaded,setLoaded]=useState(false);\r\n  \r\n  \r\n  const [show, setShow] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\nuseEffect(() => {\r\n\r\n  axios.get(`http://localhost:5000/api/stages/${props.userId}`)\r\n  .then(function (response) {\r\n   \r\n\r\n    setStages(response.data.stages)\r\n    setLoaded(true)\r\n    \r\n  })\r\n  .catch(function (error) {\r\n    \r\n  })\r\n\r\n}, [show])\r\n\r\nasync function validHandler(e){\r\n  e.preventDefault();\r\n\r\n  try {\r\n    const response = await fetch('http://localhost:5000/api/stages/valider',\r\n    {\r\n        method:'POST',\r\n        headers:{\r\n            'Content-Type' : 'application/json',\r\n            'Accept' : 'application/json'\r\n        \r\n        },\r\n        body:JSON.stringify({\r\n          stageId:e.target.value\r\n        })\r\n    });\r\n    const responseData = await response.json();\r\n\r\n            setError(responseData.message)\r\n            setShow(true);\r\n            \r\n    \r\n      \r\n      } catch (error) {\r\n           setError(error)\r\n            setShow(true);\r\n          \r\n      }\r\n\r\n }\r\n\r\n\r\n\r\n\r\n\r\n async function deleteHandler(e){\r\n  e.preventDefault();\r\n  try {\r\n    const response = await fetch('http://localhost:5000/api/stages/delete',\r\n    {\r\n        method:'DELETE',\r\n        headers:{\r\n            'Content-Type' : 'application/json',\r\n            'Accept' : 'application/json'\r\n        \r\n        },\r\n        body:JSON.stringify({\r\n          stageId:e.target.value\r\n        })\r\n    });\r\n    const responseData = await response.json();\r\n\r\n            setError(responseData.message)\r\n            setShow(true);\r\n            \r\n    \r\n      \r\n      } catch (error) {\r\n           setError(error)\r\n            setShow(true);\r\n          \r\n      }\r\n}\r\n\r\n\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n    <ErrorModal show={show} setShow={setShow} error={error} titre='' />\r\n\r\n    <div className=\"container chefdept\">\r\n      <div className=\"row header\">Mes stages</div>\r\n      <div className=\"row justify-content-end mb-5\">\r\n     <div className=\"col-sm-4\">\r\n     <Search/>\r\n     </div>\r\n     </div>\r\n     \r\n\r\n      <div className=\"table\">\r\n\r\n      { loaded ?\r\n            <Liste\r\n          \r\n            data={stages}\r\n            pageLimit={3}\r\n            dataLimit={10}\r\n            deleteHandler={deleteHandler}\r\n            validHandler={validHandler}\r\n             />\r\n        :  <Spinner animation=\"grow\" />  }\r\n      </div>\r\n    </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state =>{\r\n  return {\r\n    userId: state.userId,\r\n  }\r\n};\r\nexport default connect(mapStateToProps, null)(ListeStages);  \r\n\r\n"]},"metadata":{},"sourceType":"module"}