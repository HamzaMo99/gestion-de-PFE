{"ast":null,"code":"var _jsxFileName = \"D:\\\\projet\\\\gestion-de-PFE\\\\gestion-de-PFE\\\\client\\\\src\\\\components\\\\chefdept\\\\ListeStages.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport Table from \"react-bootstrap/Table\";\nimport { Link } from 'react-router-dom';\nimport Search from \"../util/search/search\";\nimport axios from 'axios';\nimport Spinner from 'react-bootstrap/Spinner';\nimport './chefdept.css';\nimport ErrorModal from '../modals/ErrorModal';\nimport { DataGrid } from '@material-ui/data-grid';\nimport Liste from './Liste.js/Liste';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ListeStages() {\n  _s();\n\n  const [stages, setStages] = useState([]);\n  const [loaded, setLoaded] = useState(false);\n  const [show, setShow] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [rows, setrows] = useState([]);\n\n  async function validHandler(e) {\n    e.preventDefault();\n\n    try {\n      const response = await fetch('http://localhost:5000/api/stages/valider', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          stageId: e.target.value\n        })\n      });\n      const responseData = await response.json();\n      setError(responseData.message);\n      setShow(true);\n    } catch (error) {\n      setError(error);\n      setShow(true);\n    }\n  }\n\n  async function deleteHandler(e) {\n    e.preventDefault();\n\n    try {\n      const response = await fetch('http://localhost:5000/api/stages/delete', {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          stageId: e.target.value\n        })\n      });\n      const responseData = await response.json();\n      setError(responseData.message);\n      setShow(true);\n    } catch (error) {\n      setError(error);\n      setShow(true);\n    }\n  }\n\n  useEffect(() => {\n    axios.get('http://localhost:5000/api/stages').then(function (response) {\n      // setStages(response.data.stages)\n      let t = [];\n      response.data.stages.map(e => {\n        t.push({\n          id: e._id,\n          etudiants: e.etudiants,\n          sujet: e.description,\n          date: e.dateDebut,\n          etat: e.signatureDept == 1 ? \"Valide\" : \"Non Valide\",\n          genre: e.genre,\n          email: e.email,\n          option: \"cc\"\n        });\n      });\n      setrows(t);\n      setLoaded(true);\n    }).catch(function (error) {});\n  }, [show]);\n  const columns = [{\n    field: 'etudiants',\n    headerName: 'Etudiants',\n    width: 150,\n    renderCell: params => params.value.map(e => {\n      /*#__PURE__*/\n      _jsxDEV(\"div\", {\n        children: e.nom + \" \" + e.prenom\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 6\n      }, this);\n    })\n  }, {\n    field: 'sujet',\n    headerName: 'Sujet',\n    width: 150\n  }, {\n    field: 'date',\n    headerName: 'Date de soumission',\n    type: 'date',\n    width: 150\n  }, {\n    field: 'pdf',\n    headerName: 'PDF',\n    width: 120\n  }, {\n    field: 'etat',\n    headerName: 'Etat',\n    width: 160\n  }, {\n    field: 'action',\n    headerName: 'Action',\n    width: 160,\n    renderCell: params => /*#__PURE__*/_jsxDEV(Link, {\n      variant: \"contained\",\n      color: \"primary\",\n      size: \"small\",\n      style: {\n        marginLeft: 16\n      },\n      href: params.value,\n      children: \"Open\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)\n  }];\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ErrorModal, {\n      show: show,\n      setShow: setShow,\n      error: error,\n      titre: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container chefdept\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row header\",\n        children: \"Liste des Stages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-end mb-5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white\",\n          style: {\n            height: 400,\n            width: '100%'\n          },\n          children: /*#__PURE__*/_jsxDEV(DataGrid, {\n            rows: rows,\n            columns: columns,\n            pageSize: 5,\n            checkboxSelection: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ListeStages, \"nE3hXHE/bJcdg1Ih7cEQD8IAdLs=\");\n\n_c = ListeStages;\nexport default ListeStages;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListeStages\");","map":{"version":3,"sources":["D:/projet/gestion-de-PFE/gestion-de-PFE/client/src/components/chefdept/ListeStages.js"],"names":["React","useEffect","useState","Button","Table","Link","Search","axios","Spinner","ErrorModal","DataGrid","Liste","ListeStages","stages","setStages","loaded","setLoaded","show","setShow","error","setError","rows","setrows","validHandler","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","stageId","target","value","responseData","json","message","deleteHandler","get","then","t","data","map","push","id","_id","etudiants","sujet","description","date","dateDebut","etat","signatureDept","genre","email","option","catch","columns","field","headerName","width","renderCell","params","nom","prenom","type","marginLeft","height"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport {Link} from 'react-router-dom'\r\nimport Search from \"../util/search/search\"\r\nimport axios from 'axios'\r\nimport Spinner from 'react-bootstrap/Spinner'\r\nimport './chefdept.css'\r\nimport ErrorModal from '../modals/ErrorModal';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\nimport Liste  from './Liste.js/Liste'\r\n\r\n\r\n\r\n\r\nfunction ListeStages() {\r\n   \r\n  const [stages,setStages]=useState([]);\r\n  const [loaded,setLoaded]=useState(false);\r\n  \r\n  \r\n  const [show, setShow] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [rows, setrows] = useState([]);\r\n\r\n\r\n\r\n\r\nasync function validHandler(e){\r\n  e.preventDefault();\r\n\r\n  try {\r\n    const response = await fetch('http://localhost:5000/api/stages/valider',\r\n    {\r\n        method:'POST',\r\n        headers:{\r\n            'Content-Type' : 'application/json',\r\n            'Accept' : 'application/json'\r\n        \r\n        },\r\n        body:JSON.stringify({\r\n          stageId:e.target.value\r\n        })\r\n    });\r\n    const responseData = await response.json();\r\n\r\n            setError(responseData.message)\r\n            setShow(true);\r\n            \r\n    \r\n      \r\n      } catch (error) {\r\n           setError(error)\r\n            setShow(true);\r\n          \r\n      }\r\n\r\n }\r\n\r\n\r\n\r\n\r\n\r\n async function deleteHandler(e){\r\n  e.preventDefault();\r\n  try {\r\n    const response = await fetch('http://localhost:5000/api/stages/delete',\r\n    {\r\n        method:'DELETE',\r\n        headers:{\r\n            'Content-Type' : 'application/json',\r\n            'Accept' : 'application/json'\r\n        \r\n        },\r\n        body:JSON.stringify({\r\n          stageId:e.target.value\r\n        })\r\n    });\r\n    const responseData = await response.json();\r\n\r\n            setError(responseData.message)\r\n            setShow(true);\r\n            \r\n    \r\n      \r\n      } catch (error) {\r\n           setError(error)\r\n            setShow(true);\r\n          \r\n      }\r\n}\r\n\r\nuseEffect(() => {\r\n\r\n  axios.get('http://localhost:5000/api/stages')\r\n  .then(function (response) {\r\n   \r\n\r\n    // setStages(response.data.stages)\r\n\r\n    let t = [];\r\n  \r\n   response.data.stages.map(e=>{\r\n        t.push({ id:e._id,  etudiants: e.etudiants, sujet: e.description, date: e.dateDebut, etat: e.signatureDept == 1 ? \"Valide\" : \"Non Valide\",\r\n          genre: e.genre,email: e.email,option:\"cc\" })\r\n         })\r\n\r\n    setrows(t); \r\n    \r\n    setLoaded(true)\r\n  })\r\n  .catch(function (error) {\r\n    \r\n  })\r\n}, [show])\r\nconst columns = [\r\n  { field: 'etudiants', headerName: 'Etudiants', width: 150,\r\n  renderCell: (params) => (\r\n    \r\n    params.value.map(e=>{\r\n     <div>{e.nom + \" \" + e.prenom}</div>\r\n    })\r\n  \r\n  )\r\n  },\r\n  { field: 'sujet', headerName: 'Sujet', width: 150 },\r\n  { field: 'date',headerName: 'Date de soumission',type: 'date',width: 150},\r\n  { field: 'pdf',headerName: 'PDF',width: 120},\r\n  { field: 'etat',headerName: 'Etat',width: 160},\r\n  { field: 'action',headerName: 'Action',width: 160,\r\n  renderCell: (params) => (\r\n    \r\n      <Link\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        size=\"small\"\r\n        style={{ marginLeft: 16 }}\r\n        href={params.value}\r\n      >\r\n        Open\r\n      </Link>\r\n    )},\r\n];\r\n\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n    <ErrorModal show={show} setShow={setShow} error={error} titre='' />\r\n\r\n    <div className=\"container chefdept\">\r\n      <div className=\"row header\">Liste des Stages</div>\r\n      <div className=\"row justify-content-end mb-5\">\r\n     {/* <div className=\"col-sm-4\">\r\n     <Search/>\r\n     </div> */}\r\n\r\n\r\n     </div>\r\n     \r\n\r\n      <div className=\"table\">\r\n\r\n\r\n      <div className=\"bg-white\" style={{ height: 400, width: '100%' }}>\r\n      <DataGrid rows={rows} columns={columns} pageSize={5} checkboxSelection />\r\n    </div>\r\n\r\n      {/* { loaded ?\r\n            <Liste          \r\n            data={stages}\r\n            pageLimit={3}\r\n            dataLimit={10}\r\n            deleteHandler={deleteHandler}\r\n            validHandler={validHandler}\r\n             />\r\n        :  <Spinner animation=\"grow\" />  } */}\r\n      \r\n      </div>\r\n    </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ListeStages;\r\n"]},"metadata":{},"sourceType":"module"}