{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\pi\\\\projet\\\\client\\\\src\\\\components\\\\chefdept\\\\ListeStages.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport Table from \"react-bootstrap/Table\";\nimport { Link } from 'react-router-dom';\nimport Search from \"../util/search/search\";\nimport axios from 'axios';\nimport Spinner from 'react-bootstrap/Spinner';\nimport './chefdept.css';\nimport ErrorModal from '../modals/ErrorModal';\nimport Liste from './Liste.js/Liste';\nimport { deleteStage } from \"../../../../server/contollers/stageController\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ListeStages() {\n  _s();\n\n  const [stages, setStages] = useState([]);\n  const [loaded, setLoaded] = useState(false);\n  const [show, setShow] = useState(false);\n  const [error, setError] = useState(\"\");\n  useEffect(() => {\n    axios.get('http://localhost:5000/api/stages').then(function (response) {\n      console.log(response.data.stages);\n      setStages(response.data.stages);\n      setLoaded(true);\n    }).catch(function (error) {});\n  }, [validHandler]);\n\n  function validHandler(e) {\n    axios({\n      method: 'post',\n      url: 'http://localhost:5000/api/stages/valider',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': 'Bearer <token_here>'\n      },\n      data: {\n        stageId: e.target.value\n      }\n    }).then(function (response) {\n      console.log(response.data); // setStages(response.data.stages)\n      // setLoaded(true)\n\n      setError(response.data.message);\n      setShow(true);\n    }).catch(function (error) {});\n  }\n\n  function deleteHandler(e) {\n    axios({\n      method: 'delete',\n      url: 'http://localhost:5000/api/stages/delete',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'Authorization': 'Bearer <token_here>'\n      },\n      data: {\n        stageId: e.target.value\n      }\n    }).then(function (response) {\n      console.log(response.data); // setStages(response.data.stages)\n      // setLoaded(true)\n\n      setError(response.data.message);\n      setShow(true);\n    }).catch(function (error) {});\n  }\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ErrorModal, {\n      show: show,\n      setShow: setShow,\n      error: error,\n      titre: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container chefdept\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row header\",\n        children: \"Liste des Stages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-end mb-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-4\",\n          children: /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table\",\n        children: loaded ? /*#__PURE__*/_jsxDEV(Liste, {\n          data: stages,\n          pageLimit: 3,\n          dataLimit: 10,\n          deleteHandler: deleteHandler,\n          validHandler: validHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"grow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ListeStages, \"mtDgkO7Mp5gi5+jiJPRmBSPe+zs=\");\n\n_c = ListeStages;\nexport default ListeStages;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListeStages\");","map":{"version":3,"sources":["C:/Users/user/Desktop/pi/projet/client/src/components/chefdept/ListeStages.js"],"names":["React","useEffect","useState","Button","Table","Link","Search","axios","Spinner","ErrorModal","Liste","deleteStage","ListeStages","stages","setStages","loaded","setLoaded","show","setShow","error","setError","get","then","response","console","log","data","catch","validHandler","e","method","url","headers","stageId","target","value","message","deleteHandler"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport Table from \"react-bootstrap/Table\";\r\nimport {Link} from 'react-router-dom'\r\nimport Search from \"../util/search/search\"\r\nimport axios from 'axios'\r\nimport Spinner from 'react-bootstrap/Spinner'\r\nimport './chefdept.css'\r\nimport ErrorModal from '../modals/ErrorModal';\r\nimport Liste from './Liste.js/Liste'\r\nimport { deleteStage } from \"../../../../server/contollers/stageController\";\r\n\r\n\r\n\r\n\r\n\r\nfunction ListeStages() {\r\n   \r\n  const [stages,setStages]=useState([]);\r\n  const [loaded,setLoaded]=useState(false);\r\n  \r\n  \r\n  const [show, setShow] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\nuseEffect(() => {\r\n\r\n  axios.get('http://localhost:5000/api/stages')\r\n  .then(function (response) {\r\n   \r\n\r\n   \r\n   console.log(response.data.stages);\r\n\r\n    setStages(response.data.stages)\r\n    setLoaded(true)\r\n    \r\n  })\r\n  .catch(function (error) {\r\n    \r\n  })\r\n\r\n}, [validHandler])\r\n\r\nfunction validHandler(e){\r\n  axios({\r\n    method: 'post',\r\n    url:'http://localhost:5000/api/stages/valider',\r\n    headers: {\r\n     'Content-Type' : 'application/json',\r\n     'Accept' : 'application/json',\r\n     'Authorization' : 'Bearer <token_here>'\r\n    }, \r\n    data: {\r\n      stageId:e.target.value ,\r\n    }\r\n \r\n   })\r\n   .then(function (response) {\r\n     console.log(response.data);\r\n    \r\n     // setStages(response.data.stages)\r\n     // setLoaded(true)\r\n     setError(response.data.message)\r\n     setShow(true);\r\n   })\r\n   .catch(function (error) {\r\n    \r\n   })\r\n }\r\n\r\n\r\n\r\n\r\n\r\nfunction deleteHandler(e){\r\n\r\n  axios({\r\n   method: 'delete',\r\n   url:'http://localhost:5000/api/stages/delete',\r\n   headers: {\r\n    'Content-Type' : 'application/json',\r\n    'Accept' : 'application/json',\r\n    'Authorization' : 'Bearer <token_here>'\r\n   }, \r\n   data: {\r\n     stageId:e.target.value ,\r\n   }\r\n\r\n  })\r\n  .then(function (response) {\r\n    console.log(response.data);\r\n   \r\n    // setStages(response.data.stages)\r\n    // setLoaded(true)\r\n    setError(response.data.message)\r\n    setShow(true);\r\n  })\r\n  .catch(function (error) {\r\n   \r\n  })\r\n}\r\n\r\n\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n    <ErrorModal show={show} setShow={setShow} error={error} titre='' />\r\n\r\n    <div className=\"container chefdept\">\r\n      <div className=\"row header\">Liste des Stages</div>\r\n      <div className=\"row justify-content-end mb-5\">\r\n     <div className=\"col-sm-4\">\r\n     <Search/>\r\n     </div>\r\n     </div>\r\n     \r\n\r\n      <div className=\"table\">\r\n\r\n      { loaded ?\r\n            <Liste\r\n            data={stages}\r\n            pageLimit={3}\r\n            dataLimit={10}\r\n            deleteHandler={deleteHandler}\r\n            validHandler={validHandler}\r\n             />\r\n        :  <Spinner animation=\"grow\" />  }\r\n      </div>\r\n    </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ListeStages;\r\n"]},"metadata":{},"sourceType":"module"}